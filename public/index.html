<!--     
    BardBoard - A DiscordJS bot soundboard
    Copyright (C) 2024  Giovanbattista Abbate
  
    This program is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.
  
    This program is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.
  
    You should have received a copy of the GNU General Public License
    along with this program.  If not, see <https://www.gnu.org/licenses/>. 
-->

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üéµ BardBoard & Dragons üêâ</title>
    <link rel="stylesheet" href="/styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;600;700&family=Raleway:wght@300;400;500;600&display=swap" rel="stylesheet">
</head>
<body>

    <div id="appLoader" class="app-loader">
        <div class="loader-content">
            <img class="loader-ouroboros" src="/ouroboros.svg" alt="Loading">
            <p id="loaderMessage">Preparing the Tavern...</p>
        </div>
    </div>

    <!-- Ambient background particles -->
    <div class="ambient-bg" aria-hidden="true">
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
    </div>

    <!-- ‚îÄ‚îÄ Header ‚îÄ‚îÄ -->
    <header class="app-header">
        <div class="header-inner">
            <div class="brand">
                <span class="brand-icon">üéµ</span>
                <h1 class="brand-title">BardBoard <span class="ampersand">&amp;</span> Dragons</h1>
                <span class="brand-icon dragon">üêâ</span>
            </div>

            <nav class="controls" aria-label="Playback controls">
                <div class="volume-group">
                    <svg class="vol-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon><path d="M19.07 4.93a10 10 0 0 1 0 14.14"></path><path d="M15.54 8.46a5 5 0 0 1 0 7.07"></path></svg>
                    <input id="volumeSlider" type="range" min="0" max="100" step="1" value="50" aria-label="Volume">
                </div>

                <button id="pauseToggle" class="ctrl-btn ctrl-pause" onclick="handlePauseToggle()" aria-label="Pause/Resume">
                    <svg id="pauseIcon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <rect x="6" y="4" width="4" height="16"></rect><rect x="14" y="4" width="4" height="16"></rect>
                    </svg>
                    <span>Pause</span>
                </button>

                <button id="repeatToggle" class="ctrl-btn ctrl-repeat" onclick="handleRepeatToggle()" aria-label="Toggle repeat">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M17 1l4 4-4 4"></path><path d="M3 11V9a4 4 0 014-4h14"></path>
                        <path d="M7 23l-4-4 4-4"></path><path d="M21 13v2a4 4 0 01-4 4H3"></path>
                    </svg>
                    <span>Repeat</span>
                </button>

                <button id="stopButton" class="ctrl-btn ctrl-stop" aria-label="Stop">
                    <svg viewBox="0 0 24 24" fill="currentColor"><rect x="4" y="4" width="16" height="16" rx="2"></rect></svg>
                    <span>Stop</span>
                </button>
            </nav>
        </div>

        <!-- Now-playing strip -->
        <div id="nowPlayingBar" class="now-playing-strip">
            <span class="np-pulse" aria-hidden="true"></span>
            <span class="np-label">Now Playing</span>
            <span class="np-divider">‚Ä∫</span>
            <span id="nowPlayingSong" class="np-song">Nothing playing</span>

            <!-- progress bar (hidden until a song is playing) -->
            <div class="np-progress-row" id="npProgressRow">
                <span class="np-time" id="npElapsed">0:00</span>
                <div class="np-bar-track" id="npBarTrack">
                    <div class="np-bar-fill" id="npBarFill"></div>
                    <div class="np-bar-thumb" id="npBarThumb"></div>
                </div>
                <span class="np-time" id="npDuration">0:00</span>
            </div>
        </div>
    </header>

    <!-- ‚îÄ‚îÄ Main soundboard ‚îÄ‚îÄ -->
    <main class="soundboard">
        <div class="search-bar" role="search">
            <div class="search-field">
                <svg class="search-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                    <circle cx="11" cy="11" r="8"></circle>
                    <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
                </svg>
                <input id="trackSearch" type="search" placeholder="Search tracks or categories..." autocomplete="off" aria-label="Search tracks">
            </div>
            <button id="openUpload" class="ctrl-btn ctrl-upload">Add Song</button>
        </div>
        <div class="upload-bar">
            <span id="uploadStatus" class="upload-status" aria-live="polite"></span>
        </div>
        <div id="audioButtons"></div>
    </main>

    <div id="uploadModal" class="upload-modal" aria-hidden="true">
        <div class="upload-panel" role="dialog" aria-modal="true" aria-labelledby="uploadTitle">
            <div class="upload-head">
                <h2 id="uploadTitle">Add Songs</h2>
                <button id="closeUpload" class="upload-close" type="button" aria-label="Close upload">√ó</button>
            </div>

            <form id="uploadForm" class="upload-form">
                <input id="uploadFile" type="file" accept=".mp3,.wav,.ogg,.m4a" multiple hidden>
                <label id="uploadDrop" class="upload-drop" for="uploadFile">
                    <span class="drop-title">Drag a song here</span>
                    <span class="drop-sub">or <span class="drop-link">browse</span> your files</span>
                    <span id="uploadFileName" class="drop-file">No files selected</span>
                </label>

                <div class="upload-fields">
                    <label class="field-label" for="uploadCategorySelect">Category</label>
                    <select id="uploadCategorySelect" class="field-select">
                        <option value="">Root (no category)</option>
                    </select>

                    <label class="field-label" for="uploadCategoryNew">Or create new</label>
                    <input id="uploadCategoryNew" class="field-input" placeholder="New category name">
                </div>

                <div class="upload-actions">
                    <button type="submit" class="ctrl-btn ctrl-upload">Upload</button>
                </div>
            </form>
        </div>
    </div>

    <!-- ‚îÄ‚îÄ Footer ‚îÄ‚îÄ -->
    <footer class="app-footer">
        <span>Made with ‚ô• by <a href="https://github.com/giabb" target="_blank" rel="noopener">giabb</a></span>
    </footer>

<!-- ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ Scripts ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
<script src="/app.js" defer></script>
</body>
</html>
